(this.$WP=this.$WP||[]).push(["WtjXQS/UKJvNl",(e,a)=>{"use strict";var s,t,i,o,n,r,l,c,d,u,p,g,f,m,_,v,b,h,w,k,E,N,C,O,x,y,P,F,B,D,I=({triggerNext:e,onPopupDismiss:a})=>{var[i]=s(r),{userId:o,sessionId:n}=s(l),d="MOBILE"===s(c).viewportCategory,g=()=>{},m=e||g;return t((()=>{(u(n)||o||f(i.page,i.params,d))&&a&&a()}),[o,d,a,i,n]),u(n)||o||f(i.page,i.params,d)?null:v(P,{triggerNext:m,servletName:i.page,onDismiss:()=>{a&&a(),p(n)},trackWouldOpenExplicitPreferences:g,openExplicitPreferences:g,explicitPreferencesEnabled:!1})},L=({localize:e,viewportCategory:a,onDismiss:s,triggerNext:n,openExplicitPreferences:r,trackWouldOpenExplicitPreferences:l,explicitPreferencesEnabled:c,recordEvent:d,domainName:u,appIntegrationConfig:p,login:g})=>{var[f,m]=i(!1),[E,C]=i(!1),[O,x]=i(!1),y=o((()=>{O||x(!0)}),[O,x]),P=o((()=>{y(),d("facebook_onetap_closed"),s()}),[y,d,s]),F=o((()=>{m(!0),window.FB.Event.subscribe("xfbml.render",(()=>{d("facebook_onetap_rendered")})),window.FB.getLoginStatus((e=>{"connected"===e.status||"not_authorized"===e.status?C(!0):(x(!0),n())}))}),[m,C,x,n,d]),B=o((()=>{var{sdkUrl:e,appId:a,apiVersion:s}=p;if(e&&a&&s){var t=()=>{},i=new Promise((e=>{t=e}));!function(e,a,s){window.fbAsyncInit=()=>{window.FB.init({appId:e,version:a,status:!0,cookie:!0}),s()}}(a,s,t),i.then(F)}else n()}),[F,p,n]);t((()=>{if(O)n();else{d("facebook_onetap_requested");var{sdkUrl:e}=p;_(e||"","MEMX"),B()}}),[B,d,n,O,p]);var D=o((e=>{if(!e)return null;var a=e.split(".",2)[1];if(a){var s=atob(a);try{return JSON.parse(s)}catch(e){d("facebook_onetap_parseSignedRequestFailed")}}return null}),[d]),I=o((e=>{var a=D(e);a&&a.code&&(h.set("FacebookAuthCode2",a.code,{expires:new Date((new Date).getTime()+5e3),domain:u,path:"/"}),g({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{P()},onSuccess:e=>{e&&e.userId&&(y(),e.hasCreatedMember&&(l&&l(),c&&r&&r()))}}))}),[g,y,l,P,u,c,r,D]),L=o((()=>{d("facebook_onetap_clicked"),window.FB.getLoginStatus((e=>{if("connected"===e.status){var{authResponse:a}=e;a&&a.accessToken&&I(a.signedRequest)}}))}),[d,I]);if(O||!f||!E)return null;var R={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")};setTimeout((()=>{window.FB.XFBML.parse()}),50),window.FB.Event.subscribe("auth.authResponseChange",(()=>{L()}));var A="MOBILE"===a;return b("div",{className:w("bEXwb D Gi B1 Z BB","gIfOX"),style:{bottom:A?"0px":"unset"},children:[v(N,{onClick:P}),b("div",{className:"eMzat w z",children:[v("div",{className:"duGRb Ci b f u",children:v("div",{children:R.headline})}),v("p",{className:"UBZtH Mc Nb MA NC",children:R.subhead}),v("div",{className:"bXoCh w",children:v("div",{className:"fJfEa w",children:v("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}})})}),v("div",{className:"cLprX Ci",children:v(k,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}})})]})]})},R={__key:0xb7c064a1dc73,id:"b7c064a1dc739c643393c7082b231ce7",loc:{},definitions:[]},A=({triggerNext:e,onPopupDismiss:a})=>{var[{page:i}]=s(r),n=g.includes(i),{trackWouldOpenExplicitPreferences:u}=C("ONBOARDING","FB_ONETAP"),f=o((()=>{n&&u()}),[u,n]),m=()=>{},_=()=>{var s=e||m;a&&a(),s()},{localize:b}=E(),h=x(),{viewportCategory:w}=s(c),{domainName:k}=s(d),N=O(),P=o((e=>{N({module:"facebook_onetap",action:e,context:`${i||"unknown"}`})}),[i,N]),{locale:F}=s(d),D=F.code,{userId:I,sessionId:L}=s(l),[{data:A,fetching:M,error:S}]=y({query:R,variables:{locale:D},pause:!!I});return t((()=>{!S&&A&&A.Facebook_getFbConnectConfig||a&&a()}),[S,A,a]),M?null:!S&&A&&A.Facebook_getFbConnectConfig?v(B,{onDismiss:()=>{a&&a(),p(L)},triggerNext:_,trackWouldOpenExplicitPreferences:f,appIntegrationConfig:A.Facebook_getFbConnectConfig,localize:b,viewportCategory:w,recordEvent:P,domainName:k,login:h}):(_(),null)},M=()=>{var[e,a]=i(!1),[d,p]=i("GOOGLE_ONETAP"),{userId:g,sessionId:m}=s(l),[{page:_,params:b}]=s(r),h="MOBILE"===s(c).viewportCategory;t((()=>{u(m)||g||f(_,b,h)?a(!0):e&&a(!1)}),[e,g,m,a,_,b,h]);var w=o((()=>{p("FACEBOOK_ONETAP")}),[p]),k=()=>null,E=k,N=[],C="registration_dialog";switch(d){case"GOOGLE_ONETAP":N=["google_one_tap"],E=({dismiss:e})=>v(F,{triggerNext:w,onPopupDismiss:()=>{e()}}),C="google_one_tap";break;case"FACEBOOK_ONETAP":N=["facebook_one_tap"],E=({dismiss:e})=>v(D,{onPopupDismiss:()=>{e()}}),C="facebook_one_tap"}return n({factory:k,eventTypes:N,key:"skip",tier:100,skip:!0}),n({factory:E,eventTypes:N,key:e?`skip_${C}`:C,tier:200,skip:e}),null};return[()=>{P=m.component.onUsage((()=>a("454gno")),"default"),F=I,B=L,D=A,e("default",M)},[e=>(s=e.useContext,t=e.useEffect,i=e.useState,o=e.useCallback),e=>n=e.usePopupHierarchyRender,e=>(r=e.Route,l=e.Visitor,c=e.Device,d=e.Environment),e=>(u=e.shouldSuppressRegistrationDialog,p=e.setRegDialogDismissed,g=e.HOTEL_SERVLETS),e=>f=e.shouldDisableRegDialogForRequiredLoginLithium,e=>(m=e,_=e.importScript),e=>(v=e.jsx,b=e.jsxs),e=>h=e.default,e=>w=e.default,e=>(k=e.UnsafeLocalize,E=e.useLocalize),e=>N=e.CloseIcon,e=>C=e.default,e=>O=e.useGARecorder,e=>x=e.default,e=>y=e.useQuery]]},["cDcdfi","vybtJq","2R4xv2","MWFqPp","wU942v","pLbCP4","F5FCuN","vmXh3M","jSLlaY","0DsHEV","xegF5W","2NwMnm","fsml46","mv7yXI","5X2em-"]]);
